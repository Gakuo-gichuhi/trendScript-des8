{% extends "base.html" %}

{% block extra_css %}
<style>
/* Featured Article */
.featured-article { 
    background: white; 
    padding: 2rem; 
    border-radius: 16px; 
    box-shadow: 0 8px 25px rgba(0,0,0,.1); 
    margin-bottom: 3rem; 
}
.featured-article img { 
    width: 100%;             /* Fills the container width */
    aspect-ratio: 16 / 9;    /* Standard YouTube 720p/1080p ratio */
    object-fit: cover;
    object-position: top;       /* 'cover' is better than 'contains' to avoid black bars */
    display: block;          /* Removes extra bottom whitespace */
    border-radius: 12px;
    cursor: pointer;
    transition: transform 0.2s;
}
.featured-article img:hover { transform: scale(1.03); }

/* News Layout */
.news-layout { 
    display: flex;
    flex-direction: column;
    gap: 2rem;
}
.article-item { 
    display: flex; 
    gap: 1rem; 
    background: white; 
    padding: 1rem; 
    border-radius: 12px; 
    margin-bottom: 1rem; 
    box-shadow: 0 2px 10px rgba(0,0,0,.05); 
    transition: transform 0.2s; 
}
.article-item:hover { transform: translateY(-3px); }
.article-item img { 
    width: 100%;             /* Fills the container width */
    aspect-ratio: 16 / 9;    /* Standard YouTube 720p/1080p ratio */
    object-fit: cover;
    object-position: top;       /* 'cover' is better than 'contains' to avoid black bars */
    display: block;          /* Removes extra bottom whitespace */
    border-radius: 12px;  
    cursor: pointer;
    transition: transform 0.2s;
}
.article-item img:hover { transform: scale(1.05); }

/* Responsive */
@media (max-width: 820px) { 
    .article-item { flex-direction: column; }
    .article-item img { width: 100%; height: 200px; }
}
</style>
{% endblock %}

{% block body %}

<!-- Featured Article -->
{% if featured %}
<div class="featured-article">
    {% if featured.Image %}
        <a href="{% url 'blog:blogpost' featured.Slug %}">
            <img src="{{ featured.Image.url }}" alt="{{ featured.Title }}">
        </a>
    {% endif %}
    <h1 class="mt-3">{{ featured.Title }}</h1>
    <p class="text-muted">{{ featured.Content.plain|truncatechars:300 }}</p>
    <a href="{% url 'blog:blogpost' featured.Slug %}" class="btn btn-success mt-2">Read Full Article →</a>
</div>
{% endif %}

<!-- Blog List -->
<div class="news-layout">
    {% for blog in blogs %}
    <div class="article-item">
        {% if blog.Image %}
            <a href="{% url 'blog:blogpost' blog.Slug %}">
                <img src="{{ blog.Image.url }}" alt="{{ blog.Title }}">
            </a>
        {% endif %}
        <div>
            <h3>
                <a href="{% url 'blog:blogpost' blog.Slug %}" class="text-dark text-decoration-none">{{ blog.Title }}</a>
            </h3>
            <p>{{ blog.Content.plain|truncatechars:180 }}</p>
            <a href="{% url 'blog:blogpost' blog.Slug %}" class="text-success fw-bold">Read more →</a>
        </div>
    </div>
    {% empty %}
    <p>No posts yet.</p>
    {% endfor %}
</div>

{% endblock %}

{% block sidebar_trending %}
<h4>Trending Posts</h4>
{% for t in trending %}
<div class="border-bottom pb-2 mb-2">
    <a href="{% url 'blog:blogpost' t.Slug %}" class="text-success text-decoration-none fw-bold">{{ t.Title }}</a>
</div>
{% empty %}
<p>No trending posts.</p>
{% endfor %}
{% endblock %}
