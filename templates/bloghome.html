{% extends "base.html" %}

{% block extra_css %}
<style>
/* Featured Article */
.featured-article { 
    background: white; 
    padding: 2rem; 
    border-radius: 16px; 
    box-shadow: 0 8px 25px rgba(0,0,0,.1); 
    margin-bottom: 3rem; 
}
.featured-article img { 
    border-radius: 12px; 
    max-height: 450px; 
    object-fit: cover; 
    width: 100%;
}

/* News Layout */
.news-layout { 
    display: grid; 
    grid-template-columns: 1fr 300px; 
    gap: 2rem; 
}
.article-item { 
    display: flex; 
    gap: 1rem; 
    background: white; 
    padding: 1rem; 
    border-radius: 12px; 
    margin-bottom: 1rem; 
    box-shadow: 0 2px 10px rgba(0,0,0,.05); 
    transition: transform 0.2s; 
}
.article-item:hover { transform: translateY(-3px); }
.article-item img { 
    width: 160px; 
    height: 110px; 
    object-fit: cover; 
    border-radius: 8px; 
}

/* Sidebar */
.sidebar { 
    background: white; 
    padding: 1.5rem; 
    border-radius: 12px; 
    box-shadow: 0 4px 15px rgba(0,0,0,.08); 
}
.sidebar h4 { margin-bottom: 1rem; }

/* Responsive */
@media (max-width: 820px) { 
    .news-layout { grid-template-columns: 1fr; } 
    .article-item { flex-direction: column; }
    .article-item img { width: 100%; height: 200px; }
}
</style>
{% endblock %}

{% block body %}

<!-- Featured Article -->
{% if featured %}
<div class="featured-article">
    {% if featured.Image %}
        <img src="{{ featured.Image.url }}" alt="{{ featured.Title }}">
    {% endif %}
    <h1 class="mt-3">{{ featured.Title }}</h1>
    <p class="text-muted">{{ featured.Content.plain|truncatechars:300 }}</p>
    <a href="{% url 'blog:blogpost' featured.Slug %}" class="btn btn-success mt-2">Read Full Article →</a>
</div>
{% endif %}

<div class="news-layout">
    <!-- Main Blog List -->
    <div>
        {% for blog in blogs %}
        <div class="article-item">
            {% if blog.Image %}
                <img src="{{ blog.Image.url }}" alt="{{ blog.Title }}">
            {% endif %}
            <div>
                <h3>
                    <a href="{% url 'blog:blogpost' blog.Slug %}" class="text-dark text-decoration-none">{{ blog.Title }}</a>
                </h3>
                
                <p>{{ blog.Content.plain|truncatechars:180 }}</p>
                <a href="{% url 'blog:blogpost' blog.Slug %}" class="text-success fw-bold">Read more →</a>
            </div>
        </div>
        {% empty %}
        <p>No posts yet.</p>
        {% endfor %}
    </div>

    <!-- Sidebar -->
    <aside class="sidebar">
        <h4>Trending Posts</h4>
        {% for t in trending %}
        <div class="border-bottom pb-2 mb-2">
            <a href="{% url 'blog:blogpost' t.Slug %}" class="text-success text-decoration-none fw-bold">{{ t.Title }}</a>
        </div>
        {% empty %}
        <p>No trending posts.</p>
        {% endfor %}
    </aside>
</div>

{% endblock %}
